_comment: "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL"
meta:
  version: PTDL_v2
  update_url: null
exported_at: "2026-02-09T00:00:00+00:00"
name: "DeepslateMC"
author: "nurtonyxy@users.noreply.github.com"
description: "DeepslateMC - Minecraft (multiple versions)"
features: null
docker_images:
  "ghcr.io/pterodactyl/yolks:java_21": "ghcr.io/pterodactyl/yolks:java_21"
file_denylist: []
startup: "java -Xms128M -XX:MaxRAMPercentage=95.0 -Dterminal.jline=false -Dterminal.ansi=true -jar {{SERVER_JAR}}"
config:
  files: "{}"
  startup: "{}"
  logs: "{}"
  stop: "stop"
scripts:
  installation:
    script: |-
      #!/bin/bash
      set -e
      cd /mnt/server
      apt-get update -y
      apt-get install -y curl
      # Build download URL from version
      DOWNLOAD_URL="https://pascalpex.de/files/deepslate/${MC_VERSION}/DeepslateMC.jar"
      curl -fsSL -o "${SERVER_JAR}" "${DOWNLOAD_URL}"
      # Set MOTD from server name
      safe_motd=$(printf '%s' "$MC_SERVER_NAME" | sed -e 's/[\\/&]/\\\\&/g')
      if [ -f server.properties ]; then
        if grep -q '^motd=' server.properties; then
          sed -i "s/^motd=.*/motd=${safe_motd}/" server.properties
        else
          echo "motd=${MC_SERVER_NAME}" >> server.properties
        fi
      else
        echo "motd=${MC_SERVER_NAME}" > server.properties
      fi
      ls -la "${SERVER_JAR}"
    container: "ghcr.io/pterodactyl/installers:debian"
    entrypoint: "bash"
variables:
  - name: "Server Jar File"
    description: "Server jar filename."
    env_variable: "SERVER_JAR"
    default_value: "DeepslateMC.jar"
    user_viewable: true
    user_editable: true
    rules: "required|string|max:200"
    field_type: "text"
  - name: "Server Version"
    description: "Version folder used to build download URL (e.g. 1.21.10). Available: 1.17.1, 1.18.1, 1.18.2, 1.19, 1.19.1, 1.19.2, 1.19.3, 1.19.4, 1.20.1, 1.20.2, 1.20.4, 1.20.6, 1.21, 1.21.1, 1.21.3, 1.21.4, 1.21.5, 1.21.6, 1.21.7, 1.21.8, 1.21.10."
    env_variable: "MC_VERSION"
    default_value: "1.21.10"
    user_viewable: true
    user_editable: true
    rules: "required|string|max:20"
    field_type: "text"
  - name: "Server Name"
    description: "Sets the MOTD in server.properties."
    env_variable: "MC_SERVER_NAME"
    default_value: "DeepslateMC"
    user_viewable: true
    user_editable: true
    rules: "required|string|max:200"
    field_type: "text"
